# CS102 ~ Personal Log page ~
****
## Berkay İnceişçi
****

On this page I will keep a weekly record of what I have done for the CS102 group project. This page will be submitted together with the rest of the repository, in partial fulfillment of the CS102 course requirements.

### ~ 28.04.2020 ~
THE WORKS LISTED BELOW HAVE NOTHING TO DO WITH THE IMPLEMENTATION OF PROJECT. THE PURPOSE OF THEM IS TO DEVELEOP UNDERSTANDING OF HOW THE APP WILL WORK AND TO PREPARE AN ACCURATE DETAILED DESIGN REPORT. Today, I thought a bit on outline of our project and made some additions-substractions to the scheme prepared by Ege. Then, I created user-costumer-restaurant owner classes and put some methods into them. In our app, customers and restaurants need to be ordered depending on their points or ratings for the reward purposes. At first, sorting all customers and restaurants whenever getBestCustomers or getBestRestaurants is called seemed appropriate and therefore I wrote these methods using quick sort. Then, I thought it would be better practice to update the place of customers or restaurants whenever their points or ratings are incremented. So I updated increasePoint method in the Customer class so that it updates the leaderboard whenever a customer makes a reservation and has an increase in their points (May seem simple, but it took approximately 3 hours to think and implement it). I will implement same approach to the restaurant rating system. Other than that, I'm still on the process of learning the basics of android studio and firebase.

### ~ 01.05.2020 ~
THE WORKS LISTED BELOW HAVE NOTHING TO DO WITH THE IMPLEMENTATION OF PROJECT. THE PURPOSE OF THEM IS TO DEVELEOP UNDERSTANDING OF HOW THE APP WILL WORK AND TO PREPARE AN ACCURATE DETAILED DESIGN REPORT. Today, I worked on reservation system. When a customer reserves a particular time slot from a particular restaurant, another customer should not be able to do so. For now, I represented times as Strings and stored all timeslots as an arraylist in the calendar object (which is a property of seat class- each seat should have their timetables), letting them to be selected by customers. I managed to prevent another customer to reserve a reserved seat, but there is another concern. For instance, let a customer reserve a specific table at 8:00 PM. By default, this table becomes reserved for him for 1.5 hours and nobody else can access to it. After 1.5 hours the table should become accessible (unreserved) again which requires to update system regularly in order to compare the end time of reservation to the actual local time. For that updating purpose, threads seem rational to utilize; I will try to implement threads to main method so that tables become accessible automatically. Additionally, instead of representing dates and times as Strings, representing them as Date objects and formatting them by DateTimeFormatter might be more reliable. In the next days, I will focus on Date and DateTimeFormatter classes and threads, trying to complete the reservation process.

### ~ 02.05.2020 ~
THE WORKS LISTED BELOW HAVE NOTHING TO DO WITH THE IMPLEMENTATION OF PROJECT. THE PURPOSE OF THEM IS TO DEVELEOP UNDERSTANDING OF HOW THE APP WILL WORK AND TO PREPARE AN ACCURATE DETAILED DESIGN REPORT. Today, changed the time representations from String to LocalTime objects and instead of having timeslots inside an arraylist, timeslots are now stored in Hashmap collection. Each specific time of the day is accessible by its minute representation. For example 15:10 - 16:40 timeslot's key is 15.60 + 10. Doing so apparently will not cause any problem with times. However, same approach cannot be implemented to the dates because each year or each month contains different amount of days. Therefore, In my opinion- I do not know what is the better way of doing it-, dates might be compared after they are represented in Strings. For now, customers can choose the time they want to reserve. Moreover, I learned how to use threads in order to compare real time to reservation end time. Tomorrow, I will hopefully include choosing date part to the reservation process. 

### ~ 07.05.2020 ~
This week I completed the reservation process using SQLite database and visualized it using swing components. Customers can now select a restaurant from the restaurant list, a table which is created according to the restaurant plan, a date and a time. Sunday and Monday, I learned the basics of SQL language and thought on the ways of how to implement a database to our project. Then I found that all restaurants' tables should have a calendar in which all possible timeslots are listed and when one specific timeslot is selected, then that time slot should be marked as 1 in the database and when a customer opens the app, time slots' colors should change according to the data located in the database. Tuesday and Wednesday, I added visualization to the program and made it possible for a customer to select a seat and a timetable from a restaurant. When they decided on a table, the time selection page opened, and it was always in interact with the database. When the customer clicked on a timeslot, it became red and marked as 1 in the database. When other customers entered to the app, if they chose the same seat, they would see the timeslot marked as red. Moreover, timeslots were always checked whether they passed the real-time, and if they passed real-time, they were not visible on the screen anymore. Today, I added the date selection page, which is before the time selection page and after seat selection page. Customers can now select future dates, and when that date is passed, it is deleted from the database and a new day is added to it automatically, which means the date selection page is always up to date and contains seven days. While coding those parts, I took great advantage of LocalTime, LocalDate and DateTimeFormatter classes, so I can say that the works listed above (28.04.2020, 01.05.2020, 02.05.2020) really helped me. I designed the code in such a way that when restaurant owner wants to change their available hours or max duration of the meal, no errors will occur and everything will change respectively, especially new dates will be added according to the new settings. For now, restaurants are created by hand, but all I need to do enter seat locations, available hours, and max duration of the meal to the database. Restaurants' seating plan and date-time selection tables in the database are appropriately organized for further improvements such as the cases when new restaurants are added, etc.). All we need to do from now on is to implement this code to and android studio and make it use the firebase. When I worked on SQL based database, I considered the capabilities of firebase and created tables accordingly. Therefore, I hope the implementation process will not be suffering.

### ~ 15.05.2020 ~
This week I worked on transferring the "keeping restaurant weekly plans up-to-date" approach that I constructed using SQLite to the Firebase. Seemingly, Firebase lets us store data as objects -and these objects are stored inside the database as HashMaps. To be able to delete past days or change past days with new ones, objects should be retrieved from the database as objects (by casting datasnapshots), which is the part that I am still struggling. In our restaurant class, let's say we have an object called seats which stores all the seats that restaurant have and this seat object should either include a hashmap or extend hashmap class. This is where the problems occur. No matter how I store this seats object, Firebase retrieves it as hashmap when I retrieve a restaurant object. Therefore, I couldn't call the seats object of my restaurant object and use its methods, which contains the update method as well. I was constantly getting casting errors while calling methods. My aim was to create an update method inside the restaurant class and whenever a customer clicks on the restaurant to make a reservation, have this method work. I am sure that update methods work fine, but the problem is retrieving data from the Firebase as objects. I hope to solve this problem in the following days. Meanwhile, Ege is working on a different part of the reservation making process -reservations should be distinguished by whether they are passed. If it is a past reservation, customers should see them as previous reservation on their "My Reservations" page.

### ~ 16.05.2020-17.05.2020 ~
I finally managed to update our database appropriately. When a day is passed, the customer will not be able to see that day at the reservation page of the restaurant. Moreover, the passing day is deleted and a new day is added to the database. The same approach is implemented to the time-selection page. When a timeslot is passed, the customer will not be able to see that timeslot at the time selection page of the restaurant. Apparently, not insisting on retrieving data as an object from the database and doing my work by retrieving data as hashmap eased all the process. Retrieved objects were not retrieved as the form that I familiar with. I asked help from Ege to merge what I have done into our existing project located at github repository, because the changes I did were including some class additions, etc. From now on, what is left to do is to make a time slot reserved in line with related timeslots.

### ~ 18.05.2020 ~
Ege and I finished merging what I have done into the existing code. After seeing the app working properly, I started to work for making not only the selected time slot reservable, but also all the timeslots related to it. For example, if a customer reserves timeslot "18:30 - 20:00", the related slots ("18:20 - 19:50","18:40 - 20:10" and so on) should not be reservable and marked as reserved. By the end of the day, I managed to finish the work - now more than one timeslots become reserved. Tomorrow, I will be working on "delete reservation" button which requires all related slots to be set unreserved again.
****
